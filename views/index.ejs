<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />
  <title>Dudas y Preguntas Frecuentes</title>
  <link
    rel="icon"
    href="logo-removebg-preview.png"
    type="image/x-png"
    sizes="16x16"
  />

  <style>
    body {
      background-color: #f6f7fb;
      font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    /* Navbar */
    .navbar {
      background: linear-gradient(90deg, #7c4dff, #b47cff);
      box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);
    }
    .navbar-brand {
      color: white !important;
      font-weight: bold;
      letter-spacing: 0.5px;
      cursor: pointer;
      text-align: center;
    }

    /* Logos */
    .navbar img {
      max-height: 60px;
      width: auto;
    }

    /* Contenedor principal */
    .main-container {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 2rem 1rem;
    }

    .chatbox {
      background: white;
      width: 100%;
      max-width: 600px;
      padding: 2rem;
      border-radius: 20px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
    }

    .chatbox h3 {
      text-align: center;
      color: #5a2bbf;
      font-weight: 700;
      margin-bottom: 1.5rem;
      font-size: 1.5rem;
    }

    /* Select y bot√≥n */
    form label {
      font-weight: 600;
      color: #333;
    }

    select {
      border-radius: 10px;
      border: 1px solid #ccc;
      padding: 0.6rem;
      width: 100%;
      margin-top: 0.5rem;
      margin-bottom: 1rem;
    }

    button {
      background-color: #7c4dff;
      color: white;
      font-weight: 600;
      border: none;
      border-radius: 30px;
      padding: 0.6rem 1.4rem;
      transition: background-color 0.3s ease;
    }

    button:hover {
      background-color: #6834d4;
    }

    /* Contenedor de respuesta */
    #conversacion {
      margin-top: 1.5rem;
      background-color: #f2efff;
      border-radius: 10px;
      padding: 1rem;
      min-height: 60px;
    }

    strong {
      color: #5a2bbf;
    }

    /* Footer */
    footer {
      background-color: #ece8ff;
      text-align: center;
      padding: 0.8rem;
      font-size: 0.9rem;
      color: #555;
    }

    /* Cr√©ditos (easter egg) */
    #creditos {
      display: none;
      position: absolute;
      top: 70px;
      right: 20px;
      background: #fff;
      color: #333;
      padding: 10px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
      font-size: 0.9rem;
      z-index: 9999;
    }

    /* Responsive */
    @media (max-width: 992px) {
      .navbar {
        flex-wrap: wrap;
        justify-content: center;
      }

      .navbar img {
        max-height: 55px;
      }

      .navbar-brand {
        font-size: 1rem;
        margin-top: 8px;
      }

      .chatbox {
        padding: 1.5rem;
        max-width: 95%;
      }
    }

    @media (max-width: 576px) {
      .chatbox h3 {
        font-size: 1.3rem;
      }

      button {
        width: 100%;
      }

      .navbar img {
        max-height: 45px;
      }

      #creditos {
        top: auto;
        bottom: 10px;
        right: 10px;
        font-size: 0.8rem;
      }
    }
  </style>
</head>

<body>
  <!-- Navbar -->
  <nav class="navbar navbar-expand-sm px-4">
    <div class="d-flex align-items-center flex-wrap" style="gap: 20px;">
      <a class="nav-link p-0" href="https://www.unam.mx/">
        <img src="logo (1).png" alt="UNAM" />
      </a>
      <a class="nav-link p-0" href="https://plataformaeducativa.aragon.unam.mx/">
        <img src="cuentas-aragon.png" alt="Cuentas Arag√≥n" />
      </a>
      <a class="nav-link p-0" href="https://www.aragon.unam.mx/fes-aragon/#!/inicio">
        <img src="logo-fes.png" alt="FES Arag√≥n" />
      </a>
    </div>

    <a class="navbar-brand ms-auto" onclick="mostrarCreditos()">
      ChatBot RH - FES Arag√≥n
    </a>

    <div id="creditos">
      üë®‚Äçüíª Guzm√°n Sanoyo Jos√© Jaime <br>
      üë®‚Äçüíª L√≥pez Padilla Jos√© N√©stor <br>
      Proyecto UNAM - FES Arag√≥n
    </div>
  </nav>

  <!-- Contenido principal -->
  <div class="main-container">
    <div class="chatbox">
      <h3>Dudas y Preguntas Frecuentes</h3>
      <div id="conversacion"></div>
      <form id="formulario" class="mt-3">
        <label for="pregunta">Selecciona una pregunta:</label>
        <select id="pregunta" required>
          <option value="">-- Elige una opci√≥n --</option>
        </select>
        <div class="text-center mt-3">
          <button type="submit">Consultar</button>
        </div>
      </form>
    </div>
  </div>

  <footer>
    ¬© 2025 ChatBot RH - FES Arag√≥n | Proyecto UNAM | GUZM√ÅN SANOYO JOS√â JAIME | L√ìPEZ PADILLA JOS√â N√âSTOR
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    // Easter egg
    function mostrarCreditos() {
      const div = document.getElementById("creditos");
      div.style.display = div.style.display === "none" ? "block" : "none";
    }

    // Cargar preguntas
    window.addEventListener("DOMContentLoaded", async () => {
      try {
        const res = await fetch("/api/preguntas");
        const preguntas = await res.json();

        const select = document.getElementById("pregunta");
        select.innerHTML = '<option value="">-- Elige una opci√≥n --</option>';

        preguntas.forEach((p) => {
          const option = document.createElement("option");
          option.value = p.pregunta;
          option.textContent = p.pregunta;
          select.appendChild(option);
        });
      } catch (error) {
        console.error("Error al cargar preguntas:", error);
      }
    });

    // Consultar respuesta
    document.getElementById("formulario").addEventListener("submit", async (e) => {
      e.preventDefault();
      const pregunta = document.getElementById("pregunta").value;

      try {
        const res = await fetch("/api/responder", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ pregunta }),
        });
        const data = await res.json();
        document.getElementById(
          "conversacion"
        ).innerHTML = `<p><strong>Respuesta:</strong> ${data.respuesta}</p>`;
      } catch (error) {
        document.getElementById("conversacion").innerHTML =
          "<p><strong>Error:</strong> No se pudo obtener la respuesta.</p>";
      }
    });
  </script>
</body>
</html>
